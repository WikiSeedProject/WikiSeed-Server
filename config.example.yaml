# WikiSeed Configuration Example
# Copy to config.yaml and adjust settings for your deployment

wikiseed:
  version: "1.0"

  # Cycle scheduling
  scheduling:
    cycle_dates: [1, 20]  # Days of month to start cycles (1st and 20th)
    embargo_days: 1       # Process previous cycle while current generates
    publish_deadlines:
      first_cycle: 19     # Publish by 19th for 1st cycle
      second_cycle: -1    # Publish by last day of month for 20th cycle (-1 = last day)

  # Dump selection
  dumps:
    include_history: true  # Include full history dumps on 1st cycle
    regular_types:
      - pages-articles
      - pages-meta-current
      - abstract
      - all-titles
      - stub-articles
      - stub-meta-history
      - categorylinks
      - pagelinks
      - imagelinks
      - redirect
      - site_stats
    history_types:
      - pages-meta-history
      - abstract
      - all-titles
      - stub-meta-history

  # Download settings
  download:
    chunk_size_mb: 100
    max_retries: 5
    bandwidth_limit_mbps: 0  # 0 = unlimited, set value to limit
    wikimedia_mirrors:
      - https://dumps.wikimedia.org
      - https://dumps.wikimedia.your.org
      - https://mirror.accum.se/mirror/wikimedia.org

  # Storage management
  storage:
    dumps_path: /data/dumps
    torrents_path: /data/torrents
    max_storage_gb: 2000         # Adjust based on available disk space
    cleanup_threshold_pct: 85    # Start cleanup when disk usage hits 85%
    prune_oldest_first: true

  # Torrent creation
  torrents:
    trackers:
      - udp://tracker.opentrackr.org:1337/announce
      - udp://open.stealth.si:80/announce
      - udp://tracker.torrent.eu.org:451/announce
      - udp://exodus.desync.com:6969/announce
      - udp://tracker.openbittorrent.com:6969/announce
    webseeds_enabled: true
    piece_size_mb: 16

  # Internet Archive
  ia:
    collection: wikiseed
    metadata:
      mediatype: data
      subject:
        - wikimedia
        - wikipedia
        - dumps
        - archive

  # Publishing
  publish:
    r2:
      enabled: true
      bucket: wikiseed-torrents
    gist:
      enabled: true
    pastebin:
      enabled: true
    academic_torrents:
      enabled: false  # Set to true to auto-upload to Academic Torrents

  # Monitoring
  monitoring:
    web_ui_enabled: true
    web_ui_port: 8000
    log_retention_days: 90

  # Alerts
  alerts:
    email:
      enabled: true
      smtp_host: smtp.gmail.com
      smtp_port: 587
      from: alerts@wikiseed.app
      to: your-email@example.com  # CHANGE THIS!

  # Testing (for development)
  testing:
    small_wiki_mode: false
    test_wikis:
      - aawiki      # Afar Wikipedia (~2 MB)
      - abwiki      # Abkhazian Wikipedia (~5 MB)
      - acewiki     # Acehnese Wikipedia (~8 MB)
    skip_upload_ia: false
    skip_publish: false
    cleanup_after: true
